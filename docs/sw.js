const CACHE_APP="app-story-v1",ASSETS_TO_CACHE=["/","/index.html","/offline.html","/src/push.js","/public/push.js","/webpack.common.js","/webpack.dev.js","/webpack.prod.js","/styles/styles.css","/scripts/index.js","/scripts/idb.js","/scripts/config.js","/scripts/utils/index.js","/scripts/routes/routes.js","/scripts/routes/url-parser.js","/scripts/data/api.js","/scripts/models/auth.models.js","/scripts/models/register.models.js","/scripts/models/story-models.js","/scripts/pages/app.js","/scripts/pages/upload/upload-page.js","/scripts/pages/about/about-page.js","/scripts/pages/home/home-page.js","/scripts/pages/home/offline-page.js","/scripts/pages/home/loginPage.js","/scripts/pages/home/register-page.js","/scripts/presenters/home-presenter.js","/scripts/presenters/loginPresenter.js","/scripts/presenters/register-presenter.js","/scripts/presenters/upload-presenter.js","/public/sw.js","/public/manifest.json","/images/logo-192x192.png","/images/logo-512x512.png","/images/ss-1280x800.png","/images/ss-390x844.png"];self.addEventListener("install",(s=>{self.skipWaiting(),s.waitUntil(caches.open(CACHE_APP).then((s=>s.addAll(ASSETS_TO_CACHE))).catch((s=>{console.error("error membuka cache:",s)})))})),self.addEventListener("activate",(s=>{s.waitUntil(caches.keys().then((s=>Promise.all(s.map((s=>{if(s!==CACHE_APP)return caches.delete(s)}))))).then((()=>self.clients.claim())).catch((s=>{console.error("error serverWorker activate:",s)})))})),self.addEventListener("fetch",(s=>{const e=new URL(s.request.url);ASSETS_TO_CACHE.includes(e.pathname)?s.respondWith(caches.match(s.request).then((e=>e||fetch(s.request).then((e=>caches.open(CACHE_APP).then((t=>(t.put(s.request,e.clone()),e)))))))):"navigate"===s.request.mode?s.respondWith(fetch(s.request).catch((()=>caches.match("/offline.html")))):s.respondWith(fetch(s.request))})),self.addEventListener("push",(function(s){const e=s.data?.json()||{},t=e.title||"Dicoding Notifikasi",r=e.options||{body:"test pemberitahuan baru!",icon:"/dist/images/logo.png",badge:"/dist/favicon.png"};s.waitUntil(self.registration.showNotification(t,r))}));